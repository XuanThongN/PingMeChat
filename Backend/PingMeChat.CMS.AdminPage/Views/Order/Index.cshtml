@{
    ViewData["Title"] = "Danh sách hóa đơn";
}

@section scripts
    {
    <environment names="Development">
        <script src="~/lb-views/order/index.js" asp-append-version="true"></script>
    </environment>

    <environment names="Staging,Production">
        <script src="~/lb-views/order/index.js" asp-append-version="true"></script>
    </environment>
}
@section styles{
    <link rel="stylesheet" href="~/lb-views/order/site.css" />
}
<div class="container-fluid mt-3">

    <div class="card">
        <div class="card-header">
            <div class="function-header">
              @*  <div class="d-flex mb-3">
                    <button class="btn btn-warning me-2" id="btn-filter">Bộ lọc</button>
                    <button class="btn btn-outline-secondary me-2">Thao tác đơn hàng</button>
                    <button class="btn btn-outline-secondary"> <i class="fas fa-download me-2"></i> Nhập xuất Excel</button>
                </div>*@
            </div>
            <form id="form-filter">
                @await Html.PartialAsync("/Views/Order/Index.CustomSearch.cshtml")
                @await Html.PartialAsync("/Views/Order/Index.AdvancedSearch.cshtml")

            </form>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table id="order-table" class="table table-striped table-bordered w-100">
                    <thead>
                        <tr>
                            <th>STT</th>
                            <th></th>
                            <th>Mã hóa đơn</th>
                            <th>Ngày tạo</th>
                            <th>Người tạo</th>
                            <th>Tổng tiền</th>
                            @*<th>Tổng giảm giá</th>*@
                            <th>Khách hàng</th>
                            <th>Số điện thoại</th>
                            <th>Trạng thái</th>
                            <th>Tác vụ</th>

                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="14" class="text-center">Không có dữ liệu trong bảng</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            @await Html.PartialAsync("/Views/Order/_Cancel.cshtml")

        </div>
    </div>
</div>
<!-- Modal thay đổi trạng thái đang nợ - hoàn thành-->
<div class="modal fade" id="changeStatusModal" tabindex="-1" aria-labelledby="changeStatusModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="changeStatusModalLabel">Xác nhận thanh toán</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row form-group">
                    <label class="form-label">Bạn có chắc chắn muốn thanh toán cho hóa đơn <span id="orderCodeConfirm" class="text-primary"></span></label>

                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                <button type="button" class="btn btn-primary" id="changeStatusBtn">Xác nhận</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal thay đổi thông tin hóa đơn -->
<div class="modal fade" id="changeInfoModal" tabindex="-1" aria-labelledby="changeInfoModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="changeInfoModalLabel">Điều chỉnh thông tin hóa đơn</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
               
                <div id="orderContainer">
                    <!-- Tab navigation -->
                    <ul class="nav nav-tabs" id="orderTabs" role="tablist">
                    </ul>

                    <!-- Tab content -->
                    <div class="tab-content" id="orderTabContent">
                    </div>
                </div>

               
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                <button type="button" class="btn btn-primary"  data-bs-toggle="modal" data-bs-target="#updateModal">Cập nhật</button>
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#updateAndChangeStatusModal">Cập nhật và đổi trạng thái</button>
            </div>
        </div>
    </div>
</div>


<!-- Modal Xác nhận chơi -->
<div class="modal fade" id="updateModal" tabindex="-1" aria-labelledby="updateModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="updateModalLabel">Xác nhận cập nhật</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Bạn có chắc chắn muốn cập nhật thông tin hóa đơn <span id="orderCodeUpdate" class="text-primary"></span> không?
                <p class="text-danger">* Lưu ý: Việc này chỉ đang cập nhật thông tin sản phẩm dịch vụ có sử dụng trên hóa đơn này</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                <button type="button" class="btn btn-primary" id="updateModalBtn">Xác nhận</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal Xác nhận thay đổi trạng thái -->
<div class="modal fade" id="updateAndChangeStatusModal" tabindex="-1" aria-labelledby="updateAndChangeStatusModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="updateAndChangeStatusModalLabel">Xác nhận cập nhật và thay đổi trạng thái</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Bạn có chắc chắn muốn cập nhật thông tin và thay đổi trạng thái "Hoàn thành" với hóa đơn <span id="orderCodeUpdate" class="text-primary"></span> không?
                <p class="text-danger">* Lưu ý: Việc này  đang cập nhật thông tin sản phẩm dịch vụ có sử dụng trên hóa đơn này và thay đổi trạng thái "Hoàn thành" trên hóa đơn chính</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                <button type="button" class="btn btn-success" id="updateAndChangeStatusModalBtn">Xác nhận</button>
            </div>
        </div>
    </div>
</div>
